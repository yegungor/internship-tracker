{% extends "base.html" %}

{% block title %}Edit {{ app.company }} - Internship Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <a href="{{ url_for('view_application', id=app.id) }}" class="back-link">
            <i data-lucide="arrow-left"></i>
            Back to Application
        </a>
        <h1>Edit Application</h1>
        <p class="subtitle">{{ app.company }} - {{ app.job_title }}</p>
    </div>
</div>

<form method="POST" class="application-form">
    <div class="form-grid">
        <!-- Company Information -->
        <div class="form-section">
            <h2 class="section-title">
                <i data-lucide="building-2"></i>
                Company Information
            </h2>
            
            <div class="form-group">
                <label for="company">Company Name *</label>
                <input type="text" id="company" name="company" required value="{{ app.company }}">
            </div>
            
            <div class="form-group">
                <label for="company_website">Company Website</label>
                <input type="url" id="company_website" name="company_website" value="{{ app.company_website or '' }}">
            </div>
            
            <div class="form-group">
                <label for="location">Location</label>
                <input type="text" id="location" name="location" value="{{ app.location or '' }}">
            </div>
        </div>
        
        <!-- Position Details -->
        <div class="form-section">
            <h2 class="section-title">
                <i data-lucide="briefcase"></i>
                Position Details
            </h2>
            
            <div class="form-group">
                <label for="job_title">Job Title *</label>
                <input type="text" id="job_title" name="job_title" required value="{{ app.job_title }}">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="position_level">Position Level</label>
                    <select id="position_level" name="position_level">
                        <option value="Intern" {% if app.position_level == 'Intern' %}selected{% endif %}>Intern</option>
                        <option value="Junior" {% if app.position_level == 'Junior' %}selected{% endif %}>Junior</option>
                        <option value="Mid" {% if app.position_level == 'Mid' %}selected{% endif %}>Mid-Level</option>
                        <option value="Senior" {% if app.position_level == 'Senior' %}selected{% endif %}>Senior</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="job_type">Job Type</label>
                    <select id="job_type" name="job_type">
                        <option value="Full-time" {% if app.job_type == 'Full-time' %}selected{% endif %}>Full-time</option>
                        <option value="Part-time" {% if app.job_type == 'Part-time' %}selected{% endif %}>Part-time</option>
                        <option value="Contract" {% if app.job_type == 'Contract' %}selected{% endif %}>Contract</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="work_mode">Work Mode</label>
                    <select id="work_mode" name="work_mode">
                        <option value="On-site" {% if app.work_mode == 'On-site' %}selected{% endif %}>On-site</option>
                        <option value="Remote" {% if app.work_mode == 'Remote' %}selected{% endif %}>Remote</option>
                        <option value="Hybrid" {% if app.work_mode == 'Hybrid' %}selected{% endif %}>Hybrid</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="job_posting_url">Job Posting URL</label>
                <input type="url" id="job_posting_url" name="job_posting_url" value="{{ app.job_posting_url or '' }}">
            </div>
            
            <div class="form-group">
                <label for="salary_range">Salary Range</label>
                <input type="text" id="salary_range" name="salary_range" value="{{ app.salary_range or '' }}">
            </div>
        </div>
        
        <!-- Requirements -->
        <div class="form-section full-width">
            <h2 class="section-title">
                <i data-lucide="list-checks"></i>
                Requirements
            </h2>
            
            <div class="form-group">
                <label for="requirements">Key Requirements & Qualifications</label>
                <textarea id="requirements" name="requirements" rows="4">{{ app.requirements or '' }}</textarea>
                <span class="form-hint">Skills, education, experience needed for the role</span>
            </div>
        </div>
        
        <!-- Application Status -->
        <div class="form-section">
            <h2 class="section-title">
                <i data-lucide="flag"></i>
                Application Status
            </h2>
            
            <div class="form-group">
                <label for="status">Current Status</label>
                <select id="status" name="status">
                    <option value="saved" {% if app.status == 'saved' %}selected{% endif %}>Saved (not applied yet)</option>
                    <option value="applied" {% if app.status == 'applied' %}selected{% endif %}>Applied</option>
                    <option value="interviewing" {% if app.status == 'interviewing' %}selected{% endif %}>Interviewing</option>
                    <option value="offer" {% if app.status == 'offer' %}selected{% endif %}>Received Offer</option>
                    <option value="rejected" {% if app.status == 'rejected' %}selected{% endif %}>Rejected</option>
                    <option value="withdrawn" {% if app.status == 'withdrawn' %}selected{% endif %}>Withdrawn</option>
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="date_applied">Date Applied</label>
                    <input type="date" id="date_applied" name="date_applied" 
                           value="{{ app.date_applied.strftime('%Y-%m-%d') if app.date_applied else '' }}">
                </div>
                
                <div class="form-group">
                    <label for="deadline">Application Deadline</label>
                    <input type="date" id="deadline" name="deadline" 
                           value="{{ app.deadline.strftime('%Y-%m-%d') if app.deadline else '' }}">
                </div>
            </div>
        </div>
        
        <!-- Tags and Notes -->
        <div class="form-section">
            <h2 class="section-title">
                <i data-lucide="tags"></i>
                Tags & Notes
            </h2>
            
            <div class="form-group">
                <label for="tags">Tags</label>
                <input type="text" id="tags" name="tags" value="{{ app.tags or '' }}">
                <span class="form-hint">Separate tags with commas</span>
            </div>
            
            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" name="notes" rows="3">{{ app.notes or '' }}</textarea>
            </div>
        </div>
    </div>
    
    <div class="form-actions">
        <a href="{{ url_for('view_application', id=app.id) }}" class="btn btn-ghost">Cancel</a>
        <button type="submit" class="btn btn-primary">
            <i data-lucide="save"></i>
            Save Changes
        </button>
    </div>
</form>
{% endblock %}
